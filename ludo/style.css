const board = document.getElementById("board");
const dice = document.getElementById("dice");
const rollBtn = document.getElementById("rollBtn");
const diceValueDisplay = document.getElementById("diceValue");

// 🎲 Dice roll logic
rollBtn.addEventListener("click", () => {
  dice.classList.add("animate");
  const value = Math.floor(Math.random() * 6) + 1;

  setTimeout(() => {
    dice.textContent = getDiceFace(value);
    diceValueDisplay.textContent = value;
    dice.classList.remove("animate");
  }, 600);
});

function getDiceFace(num) {
  const faces = ["", "⚀", "⚁", "⚂", "⚃", "⚄", "⚅"];
  return faces[num];
}

// 🧩 Create 15x15 grid
for (let row = 0; row < 15; row++) {
  for (let col = 0; col < 15; col++) {
    const cell = document.createElement("div");
    cell.classList.add("cell");

    // Mark homes
    if (row < 6 && col < 6) cell.classList.add("red-home");
    else if (row > 8 && col < 6) cell.classList.add("green-home");
    else if (row < 6 && col > 8) cell.classList.add("yellow-home");
    else if (row > 8 && col > 8) cell.classList.add("blue-home");

    // Center triangle
    else if (row >= 6 && row <= 8 && col >= 6 && col <= 8) {
      cell.classList.add("center");
    }

    cell.id = `cell-${row}-${col}`;
    board.appendChild(cell);
  }
}

// 🟢 Add 4 tokens per player in their homes
function addTokens() {
  const tokenMap = {
    red: [
      [1, 1], [1, 3], [3, 1], [3, 3]
    ],
    green: [
      [10, 1], [10, 3], [12, 1], [12, 3]
    ],
    yellow: [
      [1, 11], [1, 13], [3, 11], [3, 13]
    ],
    blue: [
      [10, 11], [10, 13], [12, 11], [12, 13]
    ]
  };

  for (const [color, positions] of Object.entries(tokenMap)) {
    positions.forEach(([row, col], i) => {
      const token = document.createElement("div");
      token.classList.add("token");
      token.textContent = getTokenSymbol(color);
      token.id = `${color}-token-${i}`;
      document.getElementById(`cell-${row}-${col}`).appendChild(token);
    });
  }
}

function getTokenSymbol(color) {
  return {
    red: "🔴",
    green: "🟢",
    yellow: "🟡",
    blue: "🔵"
  }[color];
}

addTokens();

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ping-Pong</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            color: #e2e8f0; /* Light text */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            overflow: hidden;
        }

        .game-container {
            width: 100%;
            max-width: 800px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            box-sizing: border-box;
        }

        canvas {
            border-radius: 1rem;
            background-color: #2d3748; /* Darker background for canvas */
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 2px solid #4a5568;
            max-width: 100%;
            height: auto;
            margin-bottom: 1rem;
        }

        .controls {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn {
            background: linear-gradient(145deg, #4c51bf, #667eea);
            color: white;
            padding: 0.75rem 2rem;
            border-radius: 9999px;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
        }

        .btn:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px -1px rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.06);
        }

        .message-box {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(45, 55, 72, 0.9);
            color: white;
            padding: 2rem 3rem;
            border-radius: 1rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            display: none; /* Hidden by default */
        }
        
        .title {
            font-size: 2.5rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 2rem;
            text-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex items-center justify-center min-h-screen">
    <div class="game-container">
        <h1 class="title">Ping-Pong</h1>
        <canvas id="pongCanvas"></canvas>
        <div class="controls">
            <button id="startButton" class="btn">Start Game</button>
            <button id="resetButton" class="btn" style="display:none;">Reset</button>
        </div>
        <div id="messageBox" class="message-box"></div>
    </div>

    <script>
        // Get the canvas and its context
        const canvas = document.getElementById('pongCanvas');
        const ctx = canvas.getContext('2d');

        // Set canvas dimensions
        canvas.width = 600;
        canvas.height = 400;

        // Game state variables
        let gameRunning = false;
        let animationFrameId;

        // Player scores
        let player1Score = 0;
        let player2Score = 0;

        // Game objects
        const player1 = {
            x: 10,
            y: canvas.height / 2 - 50,
            width: 10,
            height: 100,
            color: '#667eea',
            speed: 6
        };

        const player2 = {
            x: canvas.width - 20,
            y: canvas.height / 2 - 50,
            width: 10,
            height: 100,
            color: '#cbd5e0',
            speed: 4
        };

        const ball = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            radius: 7,
            speedX: 4,
            speedY: 4,
            color: '#f6e05e'
        };

        // Utility functions
        function drawRect(x, y, width, height, color) {
            ctx.fillStyle = color;
            ctx.fillRect(x, y, width, height);
        }

        function drawCircle(x, y, radius, color) {
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, radius, 0, Math.PI * 2, false);
            ctx.fill();
        }

        function drawText(text, x, y, color = '#e2e8f0', size = '30px', font = 'Inter') {
            ctx.fillStyle = color;
            ctx.font = `${size} ${font}`;
            ctx.textAlign = 'center';
            ctx.fillText(text, x, y);
        }

        function resetBall() {
            ball.x = canvas.width / 2;
            ball.y = canvas.height / 2;
            ball.speedX = -ball.speedX; // Reverse direction
            ball.speedY = 4;
        }
        
        function showMessage(text) {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = text;
            messageBox.style.display = 'block';
        }

        function hideMessage() {
            const messageBox = document.getElementById('messageBox');
            messageBox.style.display = 'none';
        }

        // Main drawing function
        function draw() {
            // Clear canvas
            drawRect(0, 0, canvas.width, canvas.height, '#2d3748');

            // Draw center line
            for (let i = 0; i < canvas.height; i += 20) {
                drawRect(canvas.width / 2 - 1, i, 2, 10, '#4a5568');
            }

            // Draw paddles
            drawRect(player1.x, player1.y, player1.width, player1.height, player1.color);
            drawRect(player2.x, player2.y, player2.width, player2.height, player2.color);

            // Draw ball
            drawCircle(ball.x, ball.y, ball.radius, ball.color);

            // Draw scores
            drawText(player1Score, canvas.width / 4, 50, '#667eea');
            drawText(player2Score, canvas.width * 3 / 4, 50, '#cbd5e0');
        }

        // Game logic updates
        function update() {
            // Move ball
            ball.x += ball.speedX;
            ball.y += ball.speedY;

            // Ball collision with top/bottom walls
            if (ball.y < ball.radius || ball.y > canvas.height - ball.radius) {
                ball.speedY = -ball.speedY;
            }

            // Ball collision with paddles
            if (
                (ball.x - ball.radius < player1.x + player1.width &&
                ball.y > player1.y &&
                ball.y < player1.y + player1.height)
            ) {
                ball.speedX = -ball.speedX;
                const deltaY = ball.y - (player1.y + player1.height / 2);
                ball.speedY = deltaY * 0.2; // Add some spin
            } else if (
                (ball.x + ball.radius > player2.x &&
                ball.y > player2.y &&
                ball.y < player2.y + player2.height)
            ) {
                ball.speedX = -ball.speedX;
                const deltaY = ball.y - (player2.y + player2.height / 2);
                ball.speedY = deltaY * 0.2;
            }

            // Ball scoring
            if (ball.x < 0) {
                player2Score++;
                resetBall();
            } else if (ball.x > canvas.width) {
                player1Score++;
                resetBall();
            }

            // Simple AI for player 2
            if (player2.y + player2.height / 2 < ball.y) {
                player2.y += player2.speed;
            } else {
                player2.y -= player2.speed;
            }

            // AI paddle bounds checking
            if (player2.y < 0) {
                player2.y = 0;
            } else if (player2.y + player2.height > canvas.height) {
                player2.y = canvas.height - player2.height;
            }
        }

        // Game loop
        function gameLoop() {
            if (gameRunning) {
                update();
                draw();
                animationFrameId = requestAnimationFrame(gameLoop);
            }
        }

        // Mouse move handler for player 1
        canvas.addEventListener('mousemove', (e) => {
            const rect = canvas.getBoundingClientRect();
            const scaleY = canvas.height / rect.height; // Ratio of canvas to display height
            let newY = (e.clientY - rect.top) * scaleY - player1.height / 2;

            // Constrain paddle to canvas bounds
            if (newY < 0) {
                newY = 0;
            } else if (newY + player1.height > canvas.height) {
                newY = canvas.height - player1.height;
            }
            player1.y = newY;
        });

        // Start button handler
        document.getElementById('startButton').addEventListener('click', () => {
            if (!gameRunning) {
                gameRunning = true;
                hideMessage();
                document.getElementById('startButton').style.display = 'none';
                document.getElementById('resetButton').style.display = 'block';
                gameLoop();
            }
        });

        // Reset button handler
        document.getElementById('resetButton').addEventListener('click', () => {
            gameRunning = false;
            cancelAnimationFrame(animationFrameId);
            player1Score = 0;
            player2Score = 0;
            resetBall();
            draw();
            document.getElementById('startButton').style.display = 'block';
            document.getElementById('resetButton').style.display = 'none';
            showMessage('Game Reset! Press Start to play again.');
        });
        
        // Initial draw on page load
        window.onload = function() {
            draw();
            showMessage('Welcome to Ping-Pong! Press Start to begin.');
        };

    </script>
</body>
</html>

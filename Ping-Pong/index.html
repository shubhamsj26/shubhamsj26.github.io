<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ping Pong - ToolsNGames</title>
  <meta name="description" content="Play Ping Pong online with CPU. Try ToolsNGames for free games and utility tools.">
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", sans-serif;
      background: #f4f4f4;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 2rem;
    }

    h1 {
      color: #2962ff;
      margin-bottom: 0.5rem;
    }

    .game-container {
      background: #fff;
      padding: 2rem;
      border-radius: 20px;
      box-shadow: 0 5px 20px rgba(0,0,0,0.1);
      width: 90%;
      max-width: 800px;
      text-align: center;
    }

    canvas {
      background-color: #2c3e50;
      margin: 1rem 0;
      border-radius: 8px;
    }

    select, button {
      margin: 0.5rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      background-color: #2ecc71;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
    }

    button:hover {
      background-color: #27ae60;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      margin-top: 1rem;
    }

    .score-label {
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    @media (max-width: 600px) {
      .controls {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>

  <div class="game-container">
    <h1>Ping Pong</h1>
    <p>Player (Right Paddle): ↑ & ↓ Arrow Keys<br/>First to 5 points wins!</p>

    <div class="score-label">
      <span id="cpuScore">CPU 0</span> | <span id="playerScore">Player 0</span>
    </div>

    <canvas id="pongCanvas" width="600" height="400"></canvas>

    <div class="controls">
      <div>
        <label>Game Mode:</label>
        <select id="gameMode">
          <option value="cpu">Player vs CPU</option>
        </select>
      </div>

      <div>
        <label>Ball Speed:</label>
        <select id="ballSpeed">
          <option value="slow">Slow</option>
          <option value="medium" selected>Medium</option>
          <option value="fast">Fast</option>
        </select>
      </div>

      <div>
        <label>Winning Score:</label>
        <select id="winningScore">
          <option value="3">3 Points</option>
          <option value="5" selected>5 Points</option>
          <option value="10">10 Points</option>
        </select>
      </div>
    </div>

    <button onclick="restartGame()">Restart Game</button>
  </div>

  <script>
    const canvas = document.getElementById("pongCanvas");
    const ctx = canvas.getContext("2d");

    const paddleHeight = 80;
    const paddleWidth = 10;
    const ballRadius = 10;

    let playerY = canvas.height / 2 - paddleHeight / 2;
    let cpuY = canvas.height / 2 - paddleHeight / 2;

    let ballX = canvas.width / 2;
    let ballY = canvas.height / 2;
    let ballSpeedX = 4;
    let ballSpeedY = 4;

    let playerScore = 0;
    let cpuScore = 0;

    let upPressed = false;
    let downPressed = false;
    let gameRunning = true;

    const gameMode = document.getElementById("gameMode");
    const ballSpeed = document.getElementById("ballSpeed");
    const winningScoreSelect = document.getElementById("winningScore");

    function drawRect(x, y, w, h, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, w, h);
    }

    function drawCircle(x, y, r, color) {
      ctx.fillStyle = color;
      ctx.beginPath();
      ctx.arc(x, y, r, 0, Math.PI * 2);
      ctx.closePath();
      ctx.fill();
    }

    function drawNet() {
      for (let i = 0; i < canvas.height; i += 20) {
        drawRect(canvas.width / 2 - 1, i, 2, 10, "#fff");
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawRect(0, 0, canvas.width, canvas.height, "#2c3e50");
      drawNet();
      drawRect(0, cpuY, paddleWidth, paddleHeight, "#fff");
      drawRect(canvas.width - paddleWidth, playerY, paddleWidth, paddleHeight, "#fff");
      drawCircle(ballX, ballY, ballRadius, "#fff");

      document.getElementById("cpuScore").textContent = `CPU ${cpuScore}`;
      document.getElementById("playerScore").textContent = `Player ${playerScore}`;
    }

    function update() {
      if (!gameRunning) return;

      if (upPressed && playerY > 0) playerY -= 6;
      if (downPressed && playerY < canvas.height - paddleHeight) playerY += 6;

      const difficulty = parseInt(ballSpeed.value);
      const selectedSpeed = {
        slow: 3,
        medium: 5,
        fast: 7
      }[ballSpeed.value];
      ballSpeedX = ballSpeedX > 0 ? selectedSpeed : -selectedSpeed;

      ballX += ballSpeedX;
      ballY += ballSpeedY;

      if (ballY <= 0 || ballY >= canvas.height) {
        ballSpeedY = -ballSpeedY;
      }

      if (
        ballX + ballRadius >= canvas.width - paddleWidth &&
        ballY >= playerY && ballY <= playerY + paddleHeight
      ) {
        ballSpeedX = -ballSpeedX;
      }

      if (
        ballX - ballRadius <= paddleWidth &&
        ballY >= cpuY && ballY <= cpuY + paddleHeight
      ) {
        ballSpeedX = -ballSpeedX;
      }

      // CPU AI movement
      if (ballY > cpuY + paddleHeight / 2) cpuY += 3;
      else if (ballY < cpuY + paddleHeight / 2) cpuY -= 3;

      // Scoring
      if (ballX <= 0) {
        playerScore++;
        resetBall();
      } else if (ballX >= canvas.width) {
        cpuScore++;
        resetBall();
      }

      const winningScore = parseInt(winningScoreSelect.value);
      if (playerScore >= winningScore || cpuScore >= winningScore) {
        gameRunning = false;
        alert(`${playerScore > cpuScore ? "Player" : "CPU"} wins!`);
      }
    }

    function gameLoop() {
      draw();
      update();
      requestAnimationFrame(gameLoop);
    }

    function resetBall() {
      ballX = canvas.width / 2;
      ballY = canvas.height / 2;
      ballSpeedX = -ballSpeedX;
    }

    function restartGame() {
      playerScore = 0;
      cpuScore = 0;
      gameRunning = true;
      resetBall();
    }

    document.addEventListener("keydown", (e) => {
      if (e.key === "ArrowUp") upPressed = true;
      if (e.key === "ArrowDown") downPressed = true;
    });

    document.addEventListener("keyup", (e) => {
      if (e.key === "ArrowUp") upPressed = false;
      if (e.key === "ArrowDown") downPressed = false;
    });

    gameLoop();
  </script>
</body>
</html>
